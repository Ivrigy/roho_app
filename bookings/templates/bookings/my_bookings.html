{% extends "base.html" %}

{% block title %}My Bookings â€“ Roho{% endblock %}

{% block content %}
<section aria-labelledby="my-bookings-heading" class="mb-4">
  <h2 id="my-bookings-heading" class="text-white mb-4">Your bookings</h2>

  {% if bookings %}
    {% for booking in bookings %}
      <div class="card bg-dark text-white mb-3">
        <div class="card-body">
          <h3 class="h5 card-title mb-2">{{ booking.event_name }}</h3>

          <p class="card-text mb-2">
            {{ booking.service_type }} |
            <time datetime="{{ booking.start_date|date:'Y-m-d' }}">{{ booking.start_date }}</time>
            to
            <time datetime="{{ booking.end_date|date:'Y-m-d' }}">{{ booking.end_date }}</time>
          </p>

          {% if booking.additional_notes %}
            <p class="card-text small text-white-50 mb-3">
              {{ booking.additional_notes|linebreaksbr }}
            </p>
          {% endif %}

          <div class="d-flex gap-2">
            <a href="{% url 'edit_booking' booking.id %}" class="btn btn-success" aria-label="Edit {{ booking.event_name }}">Edit</a>

            <form action="{% url 'delete_booking' booking.id %}" method="post" class="m-0 p-0"
                  onsubmit="return confirm('Delete this booking?');">
              {% csrf_token %}
              <button type="submit" class="btn btn-danger" aria-label="Delete {{ booking.event_name }}">Delete</button>
            </form>
          </div>
        </div>
      </div>
    {% endfor %}
  {% else %}
    <div class="card bg-dark text-white">
      <div class="card-body text-center">
        <p class="mb-3">You have no bookings yet.</p>
        <a href="{% url 'book_service' %}" class="btn btn-lg" style="background-color:#AE9CFF; color:black;">
          Book new service
        </a>
      </div>
    </div>
  {% endif %}
</section>
{% endblock %}
